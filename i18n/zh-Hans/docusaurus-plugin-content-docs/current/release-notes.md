---
title: 版本发布记录
description: UnderControl 完整的版本历史和更新日志
sidebar_position: 1
---

# 版本发布记录

UnderControl 的版本更新历史和新功能介绍。

## 版本号说明

UnderControl 采用**语义化版本号**（格式：主版本号.次版本号.修订号），例如 `v0.19.0`：

- **主版本号 0**：表示开发版本，API 和功能可能会有较大变动
- **次版本号**（如 0.**19**.0）：增加新功能、重大改进或包含破坏性变更时递增
- **修订号**（如 0.19.**0**）：修复 bug、小优化等向后兼容的改进时递增

---

## v0.21.6 (2026-01-31)

### 新功能

#### 自然语言任务查询

在命令行中使用自然语言查询您的任务：

```bash
ud nlquery "显示本周到期的任务"
ud nlquery "我有哪些高优先级任务？"
```

---

## v0.21.5 (2026-01-31)

### 新功能

#### CLI 多账户支持

现在可以使用 kubectl 风格的命令管理多个账户和 API 端点：

- **多上下文管理**：轻松切换个人账户和工作账户
- **多服务器支持**：配置开发、测试、生产等多个服务器
- **环境变量覆盖**：支持 CI/CD 场景下的临时覆盖

常用命令：
- `ud config get-contexts` - 列出所有配置的上下文
- `ud config use-context work` - 切换到工作账户
- `ud login --context staging` - 登录到指定上下文

### 文档

- 新增 CLI 多账户认证完整指南

---

## v0.21.1 (2026-01-30)

### 改进

#### CLI 安装体验

- **版本验证**：CLI 现在支持 `ud --version` 命令，方便验证安装是否成功
- **一键安装**：订阅页 CLI 下载区新增可复制的一键安装命令

---

## v0.21.0 (2026-01-30)

### 新功能

#### 命令行工具 (CLI)

全新的终端命令行工具，让您从终端管理任务：

- **TUI 交互模式**：运行 `ud` 进入可视化终端界面
  - Vim 风格快捷键（j/k 上下移动，gg/G 跳转，/ 搜索等）
  - 任务列表和详情页浏览
  - 直接创建、编辑、删除任务

- **文件选择器**：按 `f` 打开类似 fzf 的模糊搜索
  - 从当前目录选择文件创建任务
  - 文件第一行作为标题，其余作为描述
  - 自动跳过二进制文件

- **单次命令**：适合脚本和自动化
  - `ud task list` - 列出任务
  - `ud task create "标题"` - 创建任务
  - `ud task done <id>` - 完成任务

- **AI 助手集成**：让 Claude Code、Cursor 等 AI 工具访问您的任务

#### CLI 下载

- **订阅页新增 CLI 下载区**：支持 macOS、Linux、Windows 多平台
- **完整使用文档**：新增 CLI 文档页面，包含安装、配置和使用说明

---

## v0.20.3 (2026-01-29)

### 改进

#### 看板列表视图增强

- **列设置编辑**：在列表视图中点击列标题旁的设置按钮，可以编辑列的筛选条件和排序方式
- **创建看板引导**：点击「所有任务」系统看板的设置时，会弹出引导对话框，鼓励您创建自定义看板以获得更灵活的配置

---

## v0.20.2 (2026-01-29)

### 新功能

#### 看板列表视图

全新的看板列表视图模式，提供更灵活的任务浏览方式：

- **列表视图模式**：在看板页面切换到列表视图，以表格形式查看任务
- **全部任务看板**：新增系统级「全部任务」看板，方便查看所有私人任务
- **看板切换器**：在列表页面头部快速切换不同看板

#### 任务详情页改进

- **桌面端侧边栏固定**：任务详情的侧边栏现在会固定在视窗中，滚动时保持可见

### 改进

- **导航优化**：任务菜单现在直接跳转到看板列表视图
- **分段控件重设计**：侧边栏头部改用分段控件，操作更直观
- **列排序支持**：看板列现在支持配置 ORDER BY 排序规则
- **搜索预览**：在列编辑对话框中添加了搜索预览链接

### 修复

- **任务详情侧边栏**：修复了侧边栏固定位置的问题
- **看板翻译**：修复了国际化翻译缺失的问题
- **费用日期格式**：修复了日期更新时的格式问题
- **自定义字段查询**：修复了看板中自定义字段的查询处理

---

## v0.20.1 (2026-01-29)

### 新功能

#### 看板智能拖拽

拖拽任务到新列时，系统会智能更新任务属性以匹配目标列的条件：

- **自动属性更新**：任务移动时自动设置目标列需要的字段值
- **智能清理**：自动清除只属于原列条件的属性
- **标签处理**：标签会被智能添加或移除，而非覆盖

#### 看板多列显示

- **任务可同时出现在多列**：如果一个任务同时满足多个列的条件，它会在所有匹配的列中显示
- **独立卡片操作**：每个列中的任务卡片可以独立拖拽

#### 看板自定义字段筛选

- **支持自定义字段**：列匹配条件现在支持使用自定义字段进行筛选
- **灵活的条件组合**：可以组合状态、标签和自定义字段创建精确的任务视图

#### 看板文档

- **新增看板使用文档**：在看板信息弹窗中添加了文档链接，点击即可查看详细使用说明

### 改进

- **列设置对话框**：点击列标题打开对话框，更方便地查看和编辑列的名称及匹配条件

---

## v0.20.0 (2026-01-28)

### 新功能

#### 看板编辑模式

全新的看板布局编辑功能，让您更灵活地管理任务视图：

- **布局编辑模式**：点击"编辑布局"按钮进入编辑模式
  - 内联编辑列名称，双击即可修改
  - 直接编辑看板条件和列筛选条件
  - 使用状态下拉菜单快速选择匹配条件
  - 拖拽列进行重新排序

- **条件编辑器**：在看板标题旁显示当前筛选条件
  - 直接编辑原始查询字符串
  - 点击跳转到搜索页面查看匹配结果

#### 思维导图增强

- **状态颜色显示**：任务节点现在可以根据状态显示不同颜色，一眼识别任务进度

#### 任务视图排序

- **分组排序配置**：为每个分组设置独立的排序规则
- **视图默认排序**：创建视图时可预设排序配置

#### 命令面板优化

- **快捷键提示**：显示创建任务和选择任务的键盘快捷键
- **更清晰的快捷键显示**：改进了快捷键的视觉呈现

### 改进

- **看板性能**：列重排序使用乐观更新，操作更流畅
- **视图编辑**：现在可以编辑根级筛选条件（带警告提示）

### 修复

- **思维导图稳定性**：修复了工具提示显示问题
- **看板状态选择**：修复了状态值匹配问题

---

## v0.19.1 (2026-01-27)

### 文档改进

- **AI 聊天功能说明**：更清晰地说明了不同 AI 提供商的通信模式，帮助您更好地理解 AI 功能的工作方式
- **版本号说明**：在发布记录中添加了版本号的解释，让您了解版本号的含义
- **迁移指南**：为 v0.18.0 版本添加了数据迁移说明，帮助自部署用户平滑升级
- **AI 辅助提示**：在查询语法文档中添加了 AI 辅助使用技巧
- **快速访问更新日志**：「什么是新的」按钮现在直接链接到完整的发布记录页面

---

## v0.19.0 (2026-01-27)

### 新功能

#### 思维导图

现在您可以用思维导图的方式可视化和整理任务了！

- **任务层级思维导图**：在任务详情页面点击"思维导图"按钮，以思维导图的形式查看任务及其子任务
  - 自动根据任务关系生成思维导图
  - 点击节点直接跳转到对应任务
  - 清晰展示任务的层级结构

- **思维导图编辑器**：在任务中添加思维导图作为附件
  - 在任务详情页的附件区域，点击"添加思维导图"
  - 自由创建节点和连接关系
  - 拖拽调整节点位置
  - 双击编辑节点内容
  - 导出为图片保存

---

## v0.18.0 (2025-01-24)

### 新功能

#### 资源管理增强

- **一对多资源关联**：现在一个文件可以同时关联多个任务、预算或账户
  - 例如：一份设计图可以同时关联到多个相关任务
  - 在资源详情页查看所有关联的内容

- **快捷上传**：在资源页面顶部新增上传按钮，上传文件更方便

### 改进

- **账户、预算、费用页面**：加载速度更快，操作更流畅
- **附件管理**：修复了附件删除和显示的一些问题
- **界面优化**：简化了部分按钮样式，界面更简洁

### 升级说明（自部署用户）

如果您从旧版本升级到 v0.18.0，需要运行以下数据迁移脚本来迁移现有的资源关联关系：

```sql
-- 迁移脚本：将资源关联关系迁移到新的链接表
-- 此脚本将 resources 表中的 entity_type/entity_id 数据迁移到新的 resource_entity_links 表
-- 在 GORM AutoMigrate 创建新表后运行
-- 可安全重复运行（使用 INSERT OR IGNORE）

INSERT OR IGNORE INTO resource_entity_links (
    id,
    resource_id,
    entity_type,
    entity_id,
    created_at,
    created_by,
    updated_at,
    updated_by
)
SELECT
    lower(hex(randomblob(4)) || '-' || hex(randomblob(2)) || '-4' ||
          substr(hex(randomblob(2)),2) || '-' ||
          substr('89ab',abs(random()) % 4 + 1, 1) ||
          substr(hex(randomblob(2)),2) || '-' || hex(randomblob(6))) as id,
    r.id as resource_id,
    r.entity_type,
    r.entity_id,
    COALESCE(r.created_at, datetime('now')) as created_at,
    r.owner_id as created_by,
    COALESCE(r.updated_at, datetime('now')) as updated_at,
    r.owner_id as updated_by
FROM resources r
WHERE r.entity_type IS NOT NULL
  AND r.entity_type != ''
  AND r.entity_id IS NOT NULL
  AND r.entity_id != ''
  AND NOT EXISTS (
    SELECT 1 FROM resource_entity_links rel
    WHERE rel.resource_id = r.id
      AND rel.entity_type = r.entity_type
      AND rel.entity_id = r.entity_id
  );
```

**运行方法**：
1. 使用 SQLite 客户端连接到数据库文件
2. 执行上述 SQL 脚本
3. 重启应用

---

## 历史版本

更早的版本历史请参考项目的 Git 提交记录。
